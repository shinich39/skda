let CHARACTER_ID=["ichika","saki","honami","shiho","minori","haruka","airi","shizuku","kohane","an","akito","touya","tsukasa","emu","nene","rui","kanade","mafuyu","ena","mizuki","miku","rin","len","luka","meiko","kaito","father","partner","otorifather","shinonomefather","touyafather"],CHARACTER_NAMES=["星乃一歌","天馬咲希","望月穂波","日野森志歩","花里みのり","桐谷遥","桃井愛莉","日野森雫","小豆沢こはね","白石杏","東雲彰人","青柳冬弥","天馬司","鳳えむ","草薙寧々","神代類","宵崎奏","朝比奈まふゆ","東雲絵名","暁山瑞希","初音ミク","鏡音リン","鏡音レン","巡音ルカ","MEIKO","KAITO","白石謙","古瀧大河","鳳幸之介","東雲慎英","青柳春道"],CHARACTER_L2D_ID=["v2_01ichika_casual","v2_02saki_casual","v2_03honami_casual","v2_04shiho_casual","v2_05minori_casual","v2_06haruka_casual","v2_07airi_casual","v2_08shizuku_casual","v2_09kohane_casual","v2_10an_casual","v2_11akito_casual","v2_12touya_casual","v2_13tsukasa_casual","v2_14emu_casual","v2_15nene_casual","v2_16rui_casual","v2_17kanade_casual","v2_18mafuyu_casual","v2_19ena_casual","v2_20mizuki_casual","v2_21miku_normal","v2_22rin_normal","v2_23len_normal","v2_24luka_normal","v2_25meiko_normal","v2_26kaito_normal","sub_anfather","sub_partner","sub_otorifather","sub_shinonomefather","sub_touyafather"],UNIT_NAMES={light_sound:"Leo/need",idol:"MORE MORE JUMP！",street:"Vivid BAD SQUAD",theme_park:"ワンダーランズ×ショウタイム",school_refusal:"25時、ナイトコードで。",piapro:"バーチャル・シンガー"},BG_NAMES=["/img/bg_area_1.png"],API_HOST="https://xxsxxexkxxxxaidxxexxaxxxnxgx.xdxuxxxcxkxdxnxxxxsx.xoxrxxxxg",GIT_PREFIX="https://shinich39.github.io/skda",speechDisabledAt=0,nextDisabledAt=0,demoCount=0,inDemo=!1,L2D=function(){console.log("Live2D:",PIXI.live2d);let{Application:e,Sprite:u}=PIXI,s=PIXI.filters.AlphaFilter,n=PIXI.live2d.Live2DModel,l=document.getElementById("c1"),m=(l.width=window.screen.width,l.height=window.screen.height,new e({view:l,autoStart:!0,transparent:!0,resizeTo:window})),h=300,d=l.width-h,k=300,f=l.height-k,o=0;return{MIN_X:h,MAX_X:d,MIN_Y:k,MAX_Y:f,DEFAULT_R:o,init:function(){return new Promise(function(c,e){setTimeout(async function(){var t=["father","partner","otorifather","shinonomefather","touyafather"];let a=[0,.2,.4,.6,.8,1];var e,i,n=[[0,256],[0,256],[0,256],[1280,512],[0,256],[0,256]];a=a.map(e=>{var t=Math.min(1536,window.innerWidth);return.5*(window.innerWidth-t)+t*e}),util.shuffle(t),t.splice(3,0,"miku");for(let e=0;e<t.length;e++){var o=await p(t[e],{scale:.8,opacity:0});o.x=a[e],I(o,util.choose(Object.keys(o.internalModel.settings.motions).filter(e=>!/face/.test(e)))),m.stage.addChild(o)}(e=await u.from(GIT_PREFIX+"/img/logo.png")).rotation=y(0),e.skew.x=Math.PI,e.skew.y=Math.PI,e.scale.set(1),e.anchor.set(.5,.5),e.x=.5*l.width,e.y=.75*l.height,(i=new s).alpha=0,e.filters=[i];let r=await e;m.stage.addChild(r),_(r,128),M(r,150,[3,.3,.3,.3,.3,.3,.3,.3,1.3,1.4,1.5,.7]);for(let i=0;i<6;i++){let e=m.stage.children[i],[t,a]=n[i];setTimeout(function(){_(e,a)},t)}setTimeout(function(){L2D.fadeOut(r,512).then(()=>g(6)).then(()=>c(m))},3072)},128)})},unsetModels:function(){try{m.stage.removeChildren()}catch(e){}},getModel:p,addModel:function(e){m.stage.addChild(e)},removeModel:g,getTexture:function(e){var t=new PIXI.BaseRenderTexture(e.width,e.height),t=new PIXI.RenderTexture(t),t=new PIXI.Sprite(t);return t.scale.set(1),t.width=e.width,t.height=e.height,t.alpha=.5,t.zIndex=1,t},moveX:b,moveY:v,shiverX:function(u){return new Promise(function(t,e){let a=u.position.x-10,i=u.position.x+10,n=u.position.x-5,o=u.position.x+5,r=u.position.x,c=0;!function e(){c+=2,u.x=util.bezier([{x:a,y:0},{x:i,y:0},{x:a,y:0},{x:i,y:0},{x:n,y:0},{x:o,y:0},{x:r,y:0}],c/24).x,c<24?setTimeout(e,2):t()}()})},motion:I,resize:function(){var e=m.view.parentNode;m.renderer.resize(e.clientWidth,e.clientHeight)},rotate:x,rotateL:function(i,n=1e3){return new Promise(function(e,t){var a=i.originalRotation/90;switch(Math.abs(a%4)){case 0:r(i,!1,n);break;case 1:c(i,!1,n);break;case 2:R(i,!1,n);break;case 3:w(i,!1,n)}setTimeout(()=>{e()},n)})},rotateR:function(i,n=1e3){return new Promise(function(e,t){var a=i.originalRotation/90;switch(Math.abs(a%4)){case 0:w(i,!0,n);break;case 1:R(i,!0,n);break;case 2:c(i,!0,n);break;case 3:r(i,!0,n)}setTimeout(()=>{e()},n)})},climbLB:r,climbLT:c,climbRB:w,climbRT:R,walkX:function(a,i,n=100){return new Promise(function(e,t){b(a,a.x+i,.666*n).then(function(){b(a,a.x-3,.166*n).then(function(){b(a,a.x+3,.166*n).then(e)})})})},walkY:function(a,i,n=100){return new Promise(function(e,t){v(a,a.y+i,.666*n).then(function(){v(a,a.y-3,.166*n).then(function(){v(a,a.y+3,.166*n).then(e)})})})},scaleDown:M,scaleUp:function(r,c=1e3,t){return new Promise(function(i,e){let n=0,o=(t=t||[0,.7,.8,.9,1]).map(e=>({x:e,y:e}));!function e(){n+=2;var{x:t,y:a}=util.bezier(o,n/c);r.scale.x=t,r.scale.y=a,n<c?setTimeout(e,2):i()}()})},fadeIn:_,fadeOut:function(n,o=1e3,r){return new Promise(function(t,e){let a=0,i=(r=r||[1,.3,.2,.1,0]).map(e=>({x:e,y:0}));!function e(){a+=2,n.filters[0].alpha=util.bezier(i,a/o).x,a<o?setTimeout(e,2):t()}()})}};function y(e=0){return(e+180)*(Math.PI/180)}function g(e){m.stage.removeChildAt(e)}async function p(e,t={}){var a=await n.from((a=e,a=CHARACTER_L2D_ID[CHARACTER_ID.indexOf(a)],GIT_PREFIX+`/live2d/${a}/${a}.model3.json`)),i=a.internalModel,i=(i.motionManager,a.modelName=e,a.originalRotation=o,a.pos=0,a.rotation=y(o),a.skew.x=Math.PI,a.scale.set(l.height/a.height*(t?.scale??1)),a.anchor.set(.5,.5),a.x=.5*l.width,a.y=l.height-.3*a.height*(t?.scale??1),new s);return i.alpha=t?.opacity??1,a.filters=[i],a}function b(o,r,c=1e3){return new Promise(function(t,e){let a=o.position.x,i=r||o.position.x,n=0;!function e(){n+=12,o.x=util.bezier([{x:a,y:0},{x:i,y:0},{x:i,y:0},{x:i,y:0}],n/c).x,n<c?setTimeout(e,12):t()}()})}function v(o,r,c=1e3){return new Promise(function(t,e){let a=o.position.y,i=r||o.position.y,n=0;!function e(){n+=12,o.y=util.bezier([{x:0,y:a},{x:0,y:i},{x:0,y:i},{x:0,y:i}],n/c).y,n<c?setTimeout(e,12):t()}()})}function x(o,r,c=1e3){return new Promise(function(t,e){let a=o.rotation;let i=y(r)-a,n=0;!function e(){n+=12,o.rotation=util.bezier([{x:0,y:a},{x:0,y:a+.8*i},{x:0,y:a+i}],n/c).y,n<c?setTimeout(e,12):t()}()})}function r(o,r,c=1e3){return new Promise(function(e,t){o.x;var a=r?h+128:h,i=r?f:f-128,n=o.originalRotation,n=r?n-90:n+90;o.originalRotation=n,b(o,a,c),v(o,i,c),x(o,n,c),setTimeout(()=>{e()},c)})}function c(o,r,c=1e3){return new Promise(function(e,t){o.x;var a=r?h:h+128,i=r?k+128:k,n=o.originalRotation,n=r?n-90:n+90;o.originalRotation=n,b(o,a,c),v(o,i,c),x(o,n,c),setTimeout(()=>{e()},c)})}function w(o,r,c=1e3){return new Promise(function(e,t){o.x;var a=r?d:d-128,i=r?f-128:f,n=o.originalRotation,n=r?n-90:n+90;o.originalRotation=n,b(o,a,c),v(o,i,c),x(o,n,c),setTimeout(()=>{e()},c)})}function R(o,r,c=1e3){return new Promise(function(e,t){o.x;var a=r?d-128:d,i=r?k:k+128,n=o.originalRotation,n=r?n-90:n+90;o.originalRotation=n,b(o,a,c),v(o,i,c),x(o,n,c),setTimeout(()=>{e()},c)})}function I(e,t){var a;t||(a=e.internalModel.settings,t=util.choose(Object.keys(a.motions))),e.motion(t)}function M(r,c=1e3,t){return new Promise(function(i,e){let n=0,o=(t=t||[1,.3,.2,.1,0]).map(e=>({x:e,y:e}));!function e(){n+=2;var{x:t,y:a}=util.bezier(o,n/c);r.scale.x=t,r.scale.y=a,n<c?setTimeout(e,2):i()}()})}function _(n,o=1e3,r){return new Promise(function(t,e){let a=0,i=(r=r||[0,.7,.8,.9,1]).map(e=>({x:e,y:0}));!function e(){a+=2,n.filters[0].alpha=util.bezier(i,a/o).x,a<o?setTimeout(e,2):t()}()})}}(),C=function(){let r=document.getElementById("c2-container"),c=document.getElementById("c2"),u;return{init:function(e,t){if(t&&(nextDisabledAt=t),u)return this.update(e);"radar"===e.type?this.createRadarChart(e):"bar"===e.type?this.createBarChart(e):"line"===e.type&&this.createLineChart(e)},update:function(e){if(u.config.type!==e.type)return u.destroy(),u=null,this.init(e);"radar"===e.type?(u.data.labels=e.labels,u.data.datasets[0].data=e.values,u.options.scale.max=e.maxValue,u.options.scale.min=e.minValue):"bar"===e.type?(u.data.labels=e.labels,u.data.datasets[0].data=e.values):"line"===e.type&&(u.data.labels=e.labels,u.data.datasets[0].data=e.values,u.options.scales.y.max=e.maxValue,u.options.scales.y.min=e.minValue,u.options.scales.y.reverse=!!e.isReverse),u.update()},createRadarChart:function({minValue:e,maxValue:t,labels:a,values:i}){c.width=512;a={type:"radar",data:{labels:a,datasets:[{data:i,fill:!0,backgroundColor:"rgba(134,206,203,0.8)",borderColor:"rgb(134,206,203)",pointBackgroundColor:"rgb(134,206,203)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(134,206,203)"}]},options:{responsive:!(c.height=512),aspectRatio:1,interaction:{intersect:!1},layout:{},scale:{min:e,max:t,stepSize:33.33,beginAtZero:!0,font:{size:14}},scales:{r:{ticks:{display:!1,showLabelBackdrop:!1},pointLabels:{color:"rgb(255,255,255)",font:{size:14}},grid:{color:"rgba(255,255,255,1)",lineWidth:1},angleLines:{color:"rgba(255,255,255,1)",lineWidth:1}}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(e){return""},label:function(e){return""},afterBody:function(e){return e[0]?.formattedValue||""}}}},elements:{line:{borderWidth:1},point:{radius:3},interaction:{mode:"index"}}}};u=new Chart(c,a)},createBarChart:function({labels:e,values:t}){var a=r.getBoundingClientRect(),a=(c.width=a.width,c.height=.8*a.height,{labels:e,datasets:[{data:t,backgroundColor:"rgba(134,206,203,0.8)",borderColor:"rgb(134,206,203)",borderWidth:1}]}),e={type:"bar",data:a,options:{interaction:{intersect:!1},scales:{y:{ticks:{color:"rgb(255,255,255)",font:{size:14},beginAtZero:!0},grid:{color:"rgba(177,177,177,1)",lineWidth:1}},x:{ticks:{color:"rgb(255,255,255)",font:{size:14},beginAtZero:!0},grid:{color:"rgba(177,177,177,1)",lineWidth:1}}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(e){return""},label:function(e){return""},afterBody:function(e){return e[0]?.formattedValue||""}}}}}};u=new Chart(c,e)},createLineChart:function({minValue:e,maxValue:t,isReverse:a,labels:i,values:n}){var o=r.getBoundingClientRect(),o=(c.width=o.width,c.height=.8*o.height,{labels:i,datasets:[{data:n,fill:!1,borderColor:"rgb(134,206,203)"}]}),i={type:"line",data:o,options:{interaction:{intersect:!1},scales:{y:{min:e,max:t,reverse:!!a,ticks:{color:"rgb(255,255,255)",font:{size:14},beginAtZero:!0},grid:{color:"rgba(177,177,177,1)",lineWidth:1}},x:{ticks:{color:"rgb(255,255,255)",font:{size:14},beginAtZero:!0},grid:{color:"rgba(177,177,177,1)",lineWidth:1}}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(e){return""},label:function(e){return""},afterBody:function(e){return e[0]?.formattedValue||""}}}}}};u=new Chart(c,i)}}}();function showChart(){document.getElementById("c2-container").style.opacity="1"}function hideChart(){document.getElementById("c2-container").style.opacity="0"}function showSpeech(e,t,a){var i,n,o;speechDisabledAt>Date.now()?console.log("Speech disabled:",speechDisabledAt):(a&&(speechDisabledAt=a),a=CHARACTER_NAMES[CHARACTER_ID.indexOf(e)],i=document.getElementById("speech-container"),n=document.getElementById("speech-content"),o=document.getElementById("speech-title"),i.style.opacity="1",o.innerHTML=a||e||"???",n.innerHTML=t||"…")}function hideSpeech(){document.getElementById("speech-container").style.opacity="0"}function preventDefault(e){e.preventDefault()}async function healthCheck(){try{var e=API_HOST.replace(/x/g,"")+"/health-check";return"success"===(await(await fetch(e)).json()).message}catch(e){return!1}}async function demo(){return{data:[{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["ゴリラ率","根性","知性","競争","財布","感性"],values:[49,24,67,68,14,8],messages:["これはmickhuのステータスたよ。","今日は2024年7月16日 火曜日 21:59たね。","今日はセカイが出来てから1065日になったよ。","mickhuがセカイに来てから329日になったよ。","mickhuのランクはを240だよ。","mickhuはクリスタルを61805個持っているよ。","mickhuはコインを286481個持っているよ。","mickhuはバーチャルコインを1700個持っているよ。","mickhuはジェムを136991個持っているよ。","mickhuはピースを241714個持っているよ。","mickhuはふしぎな種を174個持っているよ。","mickhuは魔法の布を1227個持っているよ。","mickhuは魔法の糸を591個持っているよ。","mickhuは想いのカケラを16196個持っているよ。","mickhuは想いの純結晶を0個持っているよ。","mickhuは2882回プレイしたよ。","mickhuは少なくとも3375分以上プレイしたよ。","mickhuのレーティングは25.40たよ。"]},{type:"bar",character:"miku",labels:["MR.G","CT.G","CL.G","MS.G","HP.G","PR.G","CT.P","CL.P","MS.P","HP.P","PR.P","CLOTH","THREAD","COF","FOF","SEED"],values:[3364,21601,27407,31592,23118,29909,21601,27407,31592,23118,29909,1227,591,0,16196,174],messages:["これはmickhuのカバンだよ。","mickhuはジェムを136991個もっているよ。","mickhuはピースを241714個もっているよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["ランク","成長","愛情","理解","投資"],values:[72,63,88,2,59],messages:["これはmickhuが好きな初音ミクのことだよ。","mickhuが上げた初音ミクのキャラクターランクは72たよ。","mickhuが上げた初音ミクのチャレンジランクは51たよ。","mickhuが上げた初音ミクのカードのレベルは1380たよ。","mickhuは初音ミクを2588回リーダーにしたよ。","mickhuは初音ミクのユニットストーリーを0回よんだよ。","mickhuは初音ミクのイベントストーリーを0回よんだよ。","mickhuは初音ミクのカードストーリーを2回よんだよ。","mickhuは初音ミクのマスターランクを135上げたよ。","mickhuは初音ミクのスキルレベルを114上げたよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["ランク","成長","愛情","理解","投資"],values:[40,24,98,0,18],messages:["これはmickhuが好きなVIRTUAL SINGERのことだよ。","mickhuが上げたVIRTUAL SINGERのキャラクターランクは239たよ。","mickhuが上げたVIRTUAL SINGERのチャレンジランクは51たよ。","mickhuが上げたVIRTUAL SINGERのカードのレベルは2781たよ。","mickhuはVIRTUAL SINGERを2875回リーダーにしたよ。","mickhuはVIRTUAL SINGERのユニットストーリーを0回よんだよ。","mickhuはVIRTUAL SINGERのイベントストーリーを0回よんだよ。","mickhuはVIRTUAL SINGERのカードストーリーを2回よんだよ。","mickhuはVIRTUAL SINGERのマスターランクを166上げたよ。","mickhuはVIRTUAL SINGERのスキルレベルを220上げたよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["EASY","NORMAL","HARD","EXPERT","MASTER","アペンド"],values:[4,0,84,64,14,1],messages:["これはmickhuの難易度別達成率だよ。","mickhuは全て曲を24%クリアーしたよ。","mickhuのEASYの最高レーティングは11.15だよ。","mickhuのNORMALの最高レーティングは7.50だよ。","mickhuのHARDの最高レーティングは23.00だよ。","mickhuのEXPERTの最高レーティングは26.00だよ。","mickhuのMASTERの最高レーティングは26.00だよ。","mickhuのアペンドの最高レーティングは12.00だよ。","mickhuはステラをEXPERTでAPしたよ。","mickhuはTell Your WorldをMASTERでFCしたよ。"]},{type:"line",minValue:0,maxValue:25,character:"miku",labels:["プレシーズン","第2回プレシーズン","2022 SUMMER","2022 AUTUMN","2023 WINTER","2023 SPRING","2023 SUMMER","2023 AUTUMN","2024 WINTER","2024 SPRING","2024 SUMMER"],values:[0,0,0,0,0,0,5,7,9,9,9],messages:["これはmickhuのランクマッチのランクだよ。","mickhuはランクマッチを53回プレイしたよ。","mickhuはランクマッチで36回勝ったよ","mickhuはランクマッチで17回負けたよ。","mickhuのランクマッチの勝率は68%たよ。","mickhuは2024 SPRINGでシルバー クラス1を取ったよ。"]},{type:"line",minValue:0,maxValue:210209,isReverse:!0,character:"miku",labels:["プレシーズン","第2回プレシーズン","2022 SUMMER","2022 AUTUMN","2023 WINTER","2023 SPRING","2023 SUMMER","2023 AUTUMN","2024 WINTER","2024 SPRING"],values:[210209,210209,210209,210209,210209,210209,210209,184283,127013,111746],messages:["これはmickhuのランクマッチの順位だよ。","mickhuは2024 SPRINGで111746位を取ったよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["イージー","NORMAL","HARD","エキスパート","MASTER","アペンド"],values:[0,0,6,0,0,0],messages:["これはmickhuがAPした曲の数たよ。","mickhuはイージーで1曲をAPしたよ。","mickhuはNORMALで0曲をAPしたよ。","mickhuはHARDで25曲をAPしたよ。","mickhuはエキスパートで1曲をAPしたよ。","mickhuはMASTERで0曲をAPしたよ。","mickhuはアペンドで0曲をAPしたよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["イージー","ノーマル","ハード","EXPERT","マスター","APPEND"],values:[4,0,91,46,1,0],messages:["これはmickhuがFCした曲の数たよ。","mickhuはイージーで20曲をFCしたよ。","mickhuはノーマルで0曲をFCしたよ。","mickhuはハードで410曲をFCしたよ。","mickhuはEXPERTで210曲をFCしたよ。","mickhuはマスターで5曲をFCしたよ。","mickhuはAPPENDで0曲をFCしたよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["星1","星2","星3","誕生日","星4"],values:[100,96,84,1,13],messages:["これはmickhuが持っているカードの情報だよ。","mickhuはカードを434枚もっていよ。","mickhuは星1カードを26枚もっていよ。","mickhuは星2カードを212枚もっていよ。","mickhuは星3カードを133枚もっていよ。","mickhuは星4カードを62枚もっていよ。","mickhuは誕生日カードを1枚もっていよ。","mickhuはマスターランクを276上げたよ。","mickhuはスキルレベルを591上げたよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["レオニ","MMJ!","ビビバス","WxS","25時","Vocaloid","Mixed"],values:[10,6,7,9,6,0,28],messages:["これはmickhuが読んだストーリーだよ。","mickhuはレオニのストーリーを45話みたよ。","mickhuはMMJ!のストーリーを26話みたよ。","mickhuはビビバスのストーリーを34話みたよ。","mickhuはWxSのストーリーを42話みたよ。","mickhuは25時のストーリーを26話みたよ。","mickhuはVocaloidのストーリーを2話みたよ。","mickhuはMixedのストーリーを80話みたよ。","mickhuはユニットストーリーを4話みたよ。","mickhuはイベントストーリーを232話みたよ。","mickhuはカードのストーリーを19話みたよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["LN","MMJ!","MMJ!","ワンダショ","25","Vocaloid"],values:[28,25,25,25,28,40],messages:["これはmickhuが上げたキャラクターランクだよ。","mickhuはLNのキャラクターランクを110上げたよ。","mickhuはMMJ!のキャラクターランクを101上げたよ。","mickhuはMMJ!のキャラクターランクを100上げたよ。","mickhuはワンダショのキャラクターランクを100上げたよ。","mickhuは25のキャラクターランクを110上げたよ。","mickhuはVocaloidのキャラクターランクを239上げたよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["LN","MMJ","VBS","わんだほーい","ニーゴ","ミク組"],values:[3,3,3,3,4,14],messages:["これはmickhuが上げたマスターランクだよ。","mickhuはLNのマスターランクを24上げたよ。","mickhuはMMJのマスターランクを20上げたよ。","mickhuはVBSのマスターランクを20上げたよ。","mickhuはわんだほーいのマスターランクを20上げたよ。","mickhuはニーゴのマスターランクを26上げたよ。","mickhuはミク組のマスターランクを166上げたよ。"]},{type:"radar",minValue:0,maxValue:100,character:"miku",labels:["レオニ","MMJ!","VBS","WS","25時","Vocaloid"],values:[13,13,13,12,14,24],messages:["これはmickhuが上げたスキルレベルだよ。","mickhuはレオニのスキルレベルを77上げたよ。","mickhuはMMJ!のスキルレベルを74上げたよ。","mickhuはVBSのスキルレベルを74上げたよ。","mickhuはWSのスキルレベルを69上げたよ。","mickhuは25時のスキルレベルを77上げたよ。","mickhuはVocaloidのスキルレベルを220上げたよ。"]}]}}async function load(e){var t=API_HOST.replace(/x/g,"")+"/load",e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})};return await(await fetch(t,e)).json()}async function save(e){var t=API_HOST.replace(/x/g,"")+"/save",e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})};return await(await fetch(t,e)).json()}function setBg(){var e=util.choose(BG_NAMES);document.getElementById("bg1").style.backgroundImage=`url("${GIT_PREFIX}${e}")`,document.getElementById("bg1").style.backgroundPosition="center center",document.getElementById("bg1").style.backgroundRepeat="no-repeat",document.getElementById("bg1").style.backgroundSize="cover"}function setOverlay(e){document.getElementById("overlay").style.opacity=e}window.addEventListener("DOMContentLoaded",async function(e){setBg();let c=await L2D.init(),r=(console.log("Live2D:",c.stage),function(){let i=[];return{init:async function(){await util.wait(1e3);for(let t of c.stage.children){let e=!1;i.push(setInterval(async function(){e||(e=!0,async function(e){let t=Math.abs(-e.pos%4),a;switch(t){case 0:a=L2D.MAX_X<e.x;break;case 1:a=L2D.MIN_Y>e.y;break;case 2:a=L2D.MIN_X>e.x;break;case 3:a=L2D.MAX_Y<e.y}if(a){var i=util.random(256,512);switch(t){case 0:await L2D.climbRB(e,!0,i);break;case 1:await L2D.climbRT(e,!0,i);break;case 2:await L2D.climbLT(e,!0,i);break;case 3:await L2D.climbLB(e,!0,i)}e.pos+=1}else{var n=util.random(100,200),o=util.random(256,512);switch(t){case 0:await L2D.walkX(e,n,o);break;case 1:await L2D.walkY(e,-n,o);break;case 2:await L2D.walkX(e,-n,o);break;case 3:await L2D.walkY(e,n,o)}}}(t).then(()=>{e=!1,L2D.motion(t)}))},64))}},destroy:function(){return new Promise(function(a,e){i.forEach(e=>clearInterval(e)),setTimeout(function(){let e=0;for(var t of c.stage.children)!async function(e,t){var a=Math.abs(-e.pos%4),i=e.x<.5*c.view.width,n=e.y<.5*c.view.height,o=i?-1e3:c.view.width+1e3,r=n?-1e3:c.view.height+1e3;switch(a){case 0:await L2D.moveX(e,o,t);break;case 1:await L2D.moveY(e,r,t);break;case 2:await L2D.moveX(e,o,t);break;case 3:await L2D.moveY(e,r,t)}}(t,1e3).then(function(){++e>=c.stage.children.length&&(L2D.unsetModels(),console.log("L2D destroyed."),a())})},512)})}}}());async function i(e){document.body.removeEventListener("drop",s),document.body.removeEventListener("click",u),hideSpeech(),await r.destroy(),setOverlay(.5);let t,a=0,i=0;async function n(){if(!(nextDisabledAt>Date.now()))try{L2D.motion(t),e[a].messages[++i]||(a=e[a+1]?a+1:0,i=0,t.modelName!==e[a].character&&await o(e[a].character),C.init(e[a],Date.now()+1e3)),showSpeech(e[a].character,e[a].messages[i])}catch(e){console.error(e),showSpeech(null,"あーん！？",Date.now()+5e3)}}async function o(e){L2D.unsetModels();e=await L2D.getModel(e,{scale:1});return e.x=c.view.width+500,L2D.addModel(e),L2D.motion(e,util.choose(Object.keys(e.internalModel.settings.motions).filter(e=>!/face/.test(e)))),L2D.moveX(e,.75*c.view.width,3e3),e}C.init(e[a]),showSpeech(e[a].character,e[a].messages[i]),showChart(),t=await o(e[a].character),document.body.addEventListener("click",n),document.body.addEventListener("keydown",async function(e){var t=e.key;"Enter"!==t&&" "!==t||(e.preventDefault(),await n())})}async function u(){if(!inDemo)if(13<=++demoCount){console.log("Start demo!"),demoCount=0,inDemo=!0;try{var e=(await demo()).data;await i(e)}catch(e){console.error(e),showSpeech(null,"あーん！？",Date.now()+5e3),inDemo=!1}}else console.log("Until demo start:",13-demoCount)}function s(e){e.preventDefault();e=e.dataTransfer.files?.[0];if(e){let a=new FileReader;a.onload=async function(e){try{var t=(await save(a.result.replace(/\s+/g,""))).data;await i(t)}catch(e){console.error(e),showSpeech(null,"あーん！？",Date.now()+5e3)}},a.readAsText(e)}}r.init(),document.body.addEventListener("dragover",preventDefault),document.body.addEventListener("dragleave",preventDefault),document.body.addEventListener("drop",s),document.body.addEventListener("click",u)});